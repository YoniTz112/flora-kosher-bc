<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>×§× ×™×•×ª ×œ×©×‘×ª ×§×•×“×©</title>
<style>
/* CSS ORIGINAL PARA MANTER A IDENTIDADE */
body { font-family: 'David Libre', Arial, sans-serif; background: #fffaf0; direction: rtl; margin: 0; padding: 0; color: #333; }
header { background-color: #1e90ff; color: white; padding: 20px; text-align: center; font-size: 2em; font-weight: bold; box-shadow: 0 2px 6px rgba(0,0,0,0.2); }
.container { padding: 20px; max-width: 600px; margin: auto; padding-bottom: 120px; }
h1 { text-align: center; color: #1e90ff; }

.drink-container { 
  margin-bottom: 15px; border-radius: 10px; background: #fff; padding: 15px; 
  box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center; 
}
.drink-container label { font-size: 1.3em; color: #00bfff; font-weight: bold; display: block; }

button { background-color: #ffcc00; border: none; padding: 12px 20px; font-size: 1.2em; cursor: pointer; margin-top: 10px; border-radius: 10px; font-weight: bold; transition: 0.3s; }
button:hover { background-color: #e6b800; }

.qty-control { display: flex; align-items: center; justify-content: center; gap: 15px; margin: 10px 0; }
.qty-control span { font-size: 1.5em; font-weight: bold; min-width: 30px; }

.back-btn { background-color: #555; color: white; margin-bottom: 20px; font-size: 1em; padding: 10px 20px; border-radius: 10px; cursor: pointer; border: none; }

/* AJUSTE ORGANIZADO DA ERCA */
.kit-details { border: 1px solid #1e90ff; border-radius: 8px; padding: 15px; margin: 10px 0; background: #f9fcff; text-align: right; }
.kit-details ul { list-style: none; padding: 0; margin: 0; font-size: 1em; color: #333; line-height: 1.8; }

/* CARRINHO IDENTICO AO INDEX */
#cartToggle {
  position: fixed;
  bottom: 20px; /* Mudado para baixo para nÃ£o bater nos botÃµes laterais */
  left: 10px;
  border-radius: 50px;
  background-color: #ff6600;
  color: white;
  padding: 15px;
  cursor: pointer;
  z-index: 1000;
  font-weight: bold;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}

.cart {
  background-color: #f8f1d1;
  padding: 10px;
  font-weight: bold;
  position: fixed;
  top: 0;
  left: -350px; /* Esconde totalmente */
  width: 300px;
  height: 100%;
  box-shadow: 2px 0 10px rgba(0,0,0,0.2);
  transition: left 0.3s ease;
  z-index: 2000;
  display: flex;
  flex-direction: column;
}

.cart.open {
  left: 0;
}

.cart-content {
  flex-grow: 1;
  overflow-y: auto;
}

.cart-footer {
padding-top: 10px;
  border-top: 1px solid #ccc;
  background-color: #f8f1d1;
}

.cart-item {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 5px;
}

.cart-item button {
  background-color: red;
  color: white;
  padding: 0 5px;
  font-size: 0.9em;
  border-radius: 3px;
  cursor: pointer;
}

#orderMessage {
  display:none;
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.8);
  color:white;
  justify-content:center;
  align-items:center;
  font-size:2em;
  text-align:center;
  z-index:300;
  padding:20px;
  box-sizing:border-box;
  flex-direction:column;
}

#orderMessage button {
  margin-top:20px;
  padding:10px 20px;
  font-size:1em;
  cursor:pointer;
  background:#ffcc00;
  border:none;
  border-radius:5px;
  color:#000;
}

.added-popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #4caf50;
  color: white;
  padding: 20px 30px;
  border-radius: 15px;
  font-size: 1.6em;
  font-weight: bold;
  box-shadow: 0 4px 20px rgba(0,0,0,0.3);
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 500;
}

.added-popup.show {
  opacity: 1;
}

.input-label {
  display: block;
  font-weight: bold;
  margin-top: 20px;
  margin-bottom: 8px;
  font-size: 1.5em;
  color: #1e90ff;
}

.styled-input {
  width: 100%;
  padding: 12px 15px;
  font-size: 1.2em;
  border-radius: 10px;
  border: 2px solid #ccc;
  box-sizing: border-box;
}

.styled-input:focus {
  border-color: #1e90ff;
  box-shadow: 0 0 12px rgba(30,144,255,0.5);
  outline: none;
}

.latin-warning {
  color: red;
  font-weight: bold;
  font-size: 0.95em;
  margin-top: 5px;
  display: block;
}

.latin-only {
  direction: ltr;
}
</style>
</head>
<body>

<header>×§× ×™×•×ª ×œ×©×‘×ª ×§×•×“×©</header>
<div id="addedPopup" class="added-popup">× ×•×¡×£ ×œ×¢×’×œ×” âœ”</div>

<div class="container">
  <button class="back-btn" onclick="window.location.href='/'">â” ×—×–×¨×” ×œ×ª×¤×¨×™×˜ ×”×¨××©×™</button>


  <div class="drink-container">
    <label>×—×œ×” ×œ×©×‘×ª â€“ â‚ª18</label>
    <div class="qty-control">
      <button onclick="changeQty(this, -1)">-</button><span>0</span><button onclick="changeQty(this, 1)">+</button>
    </div>
    <button onclick="addQtyToCart('×—×œ×” ×œ×©×‘×ª', 18, this)">×”×•×¡×£ ×œ×¢×’×œ×”</button>
    <p style="color:red; font-weight:bold; margin-top:5px;">××œ ×ª×©×›×—/×™ ×œ×”×•×¡×™×£ ×œ×¢×’×œ×”</p>
  </div>

  <div class="drink-container">
    <label>×‘×§×‘×•×§ ×™×™×Ÿ (××™×¥ ×¢× ×‘×™×) â€“ â‚ª25</label>
    <div class="qty-control">
      <button onclick="changeQty(this, -1)">-</button><span>0</span><button onclick="changeQty(this, 1)">+</button>
    </div>
    <button onclick="addQtyToCart('×‘×§×‘×•×§ ×™×™×Ÿ (××™×¥ ×¢× ×‘×™×)', 25, this)">×”×•×¡×£ ×œ×¢×’×œ×”</button>
    <p style="color:red; font-weight:bold; margin-top:5px;">××œ ×ª×©×›×—/×™ ×œ×”×•×¡×™×£ ×œ×¢×’×œ×”</p>
  </div>

  <div class="drink-container">
    <label>×§×•×¤×¡×ª ××˜×‘×•×—×” (200×’×¨) â€“ â‚ª18</label>
    <div class="qty-control">
      <button onclick="changeQty(this, -1)">-</button><span>0</span><button onclick="changeQty(this, 1)">+</button>
    </div>
    <button onclick="addQtyToCart('×§×•×¤×¡×ª ××˜×‘×•×—×” (200×’×¨)', 18, this)">×”×•×¡×£ ×œ×¢×’×œ×”</button>
    <p style="color:red; font-weight:bold; margin-top:5px;">××œ ×ª×©×›×—/×™ ×œ×”×•×¡×™×£ ×œ×¢×’×œ×”</p>
  </div>

  <div class="drink-container">
    <label>×§×•×¤×¡×ª ×—×•××•×¡ (200×’×¨) â€“ â‚ª18</label>
    <div class="qty-control">
      <button onclick="changeQty(this, -1)">-</button><span>0</span><button onclick="changeQty(this, 1)">+</button>
    </div>
    <button onclick="addQtyToCart('×§×•×¤×¡×ª ×—×•××•×¡ (200×’×¨)', 18, this)">×”×•×¡×£ ×œ×¢×’×œ×”</button>
    <p style="color:red; font-weight:bold; margin-top:5px;">××œ ×ª×©×›×—/×™ ×œ×”×•×¡×™×£ ×œ×¢×’×œ×”</p>
  </div>

  <div class="drink-container">
    <label>×§×•×¤×¡×ª ×˜×—×™× ×” (200×’×¨) â€“ â‚ª18</label>
    <div class="qty-control">
      <button onclick="changeQty(this, -1)">-</button><span>0</span><button onclick="changeQty(this, 1)">+</button>
    </div>
    <button onclick="addQtyToCart('×§×•×¤×¡×ª ×˜×—×™× ×” (200×’×¨)', 18, this)">×”×•×¡×£ ×œ×¢×’×œ×”</button>
    <p style="color:red; font-weight:bold; margin-top:5px;">××œ ×ª×©×›×—/×™ ×œ×”×•×¡×™×£ ×œ×¢×’×œ×”</p>
  </div>

  <div class="drink-container">
    <label>×¢×¨×›×” ×œ×©×‘×ª â€“ â‚ª280</label>
    <p style="font-size:1.1em; color:#555; margin:6px 0 10px;">××¨×•×—×ª ×©×‘×ª ××¨×•×–×” Â· ××•×ª×× ×œÖ¾3 ×¡×•×¢×“×™×</p>

    <div class="kit-details">
      <ul>
        <li>â€¢ ×‘×§×‘×•×§ ×™×™×Ÿ ×œ×§×™×“×•×©</li>
        <li>â€¢ 2 ×—×œ×•×ª</li>
        <li>â€¢ ×—×•××•×¡, ×˜×—×™× ×” ×•××˜×‘×•×—×” (200 ×’×¨× ×›×œ ××—×“)</li>
        <li>â€¢ ×¡×œ×˜ ×™×¨×§×•×ª, ×¡×œ×˜ ×›×¨×•×‘, ×ª×¤×•×´× ×•××•×¨×–</li>
        <li>â€¢ ×“×’×™× â€“ 3 ×× ×•×ª, ×¢×•×£ â€“ 3 ×× ×•×ª</li>
      </ul>
    </div>

    <p style="font-size:0.95em; color:#1e90ff; background:#eef6ff; padding:10px; border-radius:6px; margin-bottom:10px; font-weight: bold;">
      × ×™×ª×Ÿ ×œ×”×–××™×Ÿ ×•×œ×©×œ× ×›×‘×¨ ×‘×™×•× ×—××™×©×™. <br>
      ×œ×ª×™××•× ××©×œ×•×— â€“ ×”×•×“×¢×” ×œ××˜×‘×— ×”×—×œ ×-08:00 ×‘×©×™×©×™.
    </p>

    <div class="qty-control">
      <button onclick="changeQty(this, -1)">-</button><span>0</span><button onclick="changeQty(this, 1)">+</button>
    </div>
    <button onclick="addQtyToCart('×¢×¨×›×” ×œ×©×‘×ª', 280, this)">×”×•×¡×£ ×œ×¢×’×œ×”</button>
    <p style="color:red; font-weight:bold; margin-top:5px;">××œ ×ª×©×›×—/×™ ×œ×”×•×¡×™×£ ×œ×¢×’×œ×”</p>
  </div>

</div>

<div id="cartToggle" onclick="toggleCart()">×”×¢×’×œ×” ×©×œ×™ ğŸ›’</div>
<div id="cart" class="cart">
    <div class="cart-header">
        <span>×¢×’×œ×ª ×”×§× ×™×•×ª ×©×œ×™</span>
        <button onclick="toggleCart()">X</button>
    </div>
    <div id="cartContent" class="cart-content">×”×¢×’×œ×” ×¨×™×§×”</div>
    <div id="cartFooter" class="cart-footer"></div>
</div>

<script>
window.addEventListener("DOMContentLoaded", () => {
  const nameInput = document.getElementById("customerName");
  const surnameInput = document.getElementById("customerSurname");

  if (nameInput) {
    const savedName = sessionStorage.getItem("customerName");
    if (savedName) nameInput.value = savedName;

    nameInput.addEventListener("input", () => {
      sessionStorage.setItem("customerName", nameInput.value);
    });
  }

  if (surnameInput) {
    const savedSurname = sessionStorage.getItem("customerSurname");
    if (savedSurname) surnameInput.value = savedSurname;

    surnameInput.addEventListener("input", () => {
      sessionStorage.setItem("customerSurname", surnameInput.value);
    });
  }
});


// USAR sharedCart PARA SINCRONIZAR COM O INDEX
let cart = JSON.parse(sessionStorage.getItem('sharedCart') || '[]');

window.onload = updateCart;

function changeQty(btn, delta){
    const span = btn.parentElement.querySelector('span');
    let qty = parseInt(span.textContent);
    qty = Math.max(0, qty + delta);
    span.textContent = qty;
}

function addQtyToCart(name, price, btn){
    const qtySpan = btn.parentElement.querySelector("span");
    const qty = parseInt(qtySpan.textContent);
    if(qty === 0) return;

    // Em vez de fazer um loop, adicionamos UM item com a propriedade 'qty'
    cart.push({ 
        name: name, 
        price: price, 
        toppings: [], 
        toppingsPrice: 0, 
        type: "qty", // Para o servidor entender que tem quantidade
        qty: qty 
    });

    qtySpan.textContent = "0";
    updateCart();
    showAddedPopup();
}

function updateCart(){
    sessionStorage.setItem('sharedCart', JSON.stringify(cart));
    const content = document.getElementById("cartContent");
    const footer = document.getElementById("cartFooter");

    if(cart.length === 0){
        content.innerHTML = "×”×¢×’×œ×” ×¨×™×§×”";
        footer.innerHTML = "";
        return;
    }

    // Mostra a quantidade bonitinho no carrinho do Shabat
    content.innerHTML = cart.map((item, i) => {
        const q = item.qty || 1;
        return `
            <div class="cart-item">
                <button onclick="removeFromCart(${i})">X</button> 
                <strong>${q}x</strong> ${item.name} â€” â‚ª${(item.price * q).toFixed(2)}
            </div>
        `;
    }).join('');

    const total = cart.reduce((sum, item) => sum + (item.price * (item.qty || 1)), 0);
    footer.innerHTML = `<div style="font-size:1.5em; font-weight:bold; margin-bottom:10px;">×¡×”"×›: â‚ª${total.toFixed(2)}</div>
                        <p style="font-size:0.8em; color:#666; text-align:center;">×œ×©×œ×™×—×ª ×”×”×–×× ×” ×™×© ×œ×—×–×•×¨ ×œ×“×£ ×”×¨××©×™</p>`;
}
function removeFromCart(i){ cart.splice(i,1); updateCart(); }
function toggleCart(){ document.getElementById('cart').classList.toggle('open'); }
function showAddedPopup(){ 
    const p = document.getElementById("addedPopup"); 
    p.classList.add("show"); 
    setTimeout(() => p.classList.remove("show"), 800); 
}
</script>
</body>
</html>